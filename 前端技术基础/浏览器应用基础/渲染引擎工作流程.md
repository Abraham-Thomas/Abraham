# 渲染引擎工作流程

工作流程如下图：

![渲染引擎工作流程](E:\GitHub\Area\前端技术基础\浏览器应用基础\渲染引擎工作流程.png)

​	1、渲染引擎先将HTML元素标签解析成由各个DOM元素对象节点组成的且具有节点父子关系的DOM树结构，

​	2、然后根据DOM树结构的每个节点顺序提取计算使用的CSS规则并重新计算DOM树结构的样式数据，生成一个带样式描述的DOM渲染树对象。

​	3、DOM渲染树生成结束后，进入渲染树布局阶段，即根据每个渲染树节点在页面中的大小和位置，将节点固定到页面的对应位置上，这个阶段主要是元素的布局属性（如position、float、margin等），即在浏览器中绘制页面上元素节点的位置。

​	4、将渲染树节点的背景、颜色、文本等样式信息应用到每个节点上，这个阶段主要是元素的内部显示样式（color、background、text-shadow等）生效，最终完成整个DOM在页面上的绘制显示。



主要关注渲染树的布局阶段和绘制阶段，页面生成后，如果页面元素位置发生变化，就要从布局阶段开始重新渲染，也就是页面重排。如果页面元素知识显示样式改变而布局不变，那么页面内容改变将从绘制阶段开始，也成为页面重绘。重排会导致页面元素几何大小位置发生变化且伴随重新渲染的代价，所以尽力避免它，并介绍重绘。

![Webkit内核渲染DOM流程](E:\GitHub\Area\前端技术基础\浏览器应用基础\WebKit内核渲染DOM流程.png)